# 后台管理系统说明

## 🎯 功能概述

这是一个完整的后台管理系统，用于处理"联系我们"页面的快速咨询表单提交。

### 主要功能：
- ✅ **表单数据收集** - 收集用户提交的咨询信息
- ✅ **数据库存储** - 使用SQLite数据库存储所有咨询记录
- ✅ **邮件通知** - 自动发送邮件到指定邮箱
- ✅ **后台管理** - 管理员可查看所有咨询记录
- ✅ **数据统计** - 显示总咨询数、今日咨询、待处理数量

## 🚀 快速启动

### 1. 安装依赖
```bash
pip install -r requirements_backend.txt
```

### 2. 启动服务器
```bash
python server.py
```

或者使用启动脚本：
```bash
python start_backend.py
```

### 3. 访问后台管理
- **地址**: http://localhost:5001/admin
- **用户名**: kaiwen
- **密码**: 11112222

## 📧 邮件配置

### 重要：配置邮件发送
在 `server.py` 文件中找到以下代码并修改：

```python
# 邮件配置
sender_email = "kaiwen0151@163.com"  # 163邮箱
sender_password = "DTWUdNmQnLvNPYJC"   # 163邮箱授权码
```

### 163邮箱授权码设置步骤：
1. 登录163邮箱
2. 进入"设置" → "POP3/SMTP/IMAP"
3. 开启"SMTP服务"
4. 获取授权码并填入 `sender_password`
5. 确保使用的是授权码而不是登录密码

## 📊 后台管理功能

### 登录界面
- 美观的毛玻璃效果登录界面
- 用户名和密码验证
- 错误提示和状态保持

### 数据统计
- **总咨询数** - 所有提交的咨询表单数量
- **今日咨询** - 当天提交的咨询表单数量
- **待处理** - 状态为"新提交"的咨询数量

### 咨询记录表格
显示以下信息：
- 提交时间
- 姓名
- 电话
- 邮箱
- 咨询类型
- 咨询内容
- 处理状态

## 🔧 技术架构

### 后端技术栈：
- **Flask** - Web框架
- **SQLite** - 数据库
- **SMTP** - 邮件发送
- **CORS** - 跨域支持

### 前端技术栈：
- **HTML5** - 页面结构
- **CSS3** - 样式设计
- **JavaScript** - 交互逻辑

## 📁 文件结构

```
sml-2025/
├── server.py                 # 后端服务器
├── admin.html               # 后台管理页面
├── requirements_backend.txt  # 依赖包列表
├── start_backend.py         # 启动脚本
├── BACKEND_README.md        # 说明文档
└── consultations.db         # 数据库文件（自动生成）
```

## 🔒 安全特性

### 登录验证
- 硬编码的用户名和密码验证
- 本地存储登录状态
- 自动登录检查

### 数据保护
- 表单数据验证
- SQL注入防护
- 错误处理机制

## 📧 邮件通知

### 邮件内容包含：
- 提交者姓名
- 联系电话
- 邮箱地址
- 咨询类型
- 咨询内容
- 提交时间

### 邮件配置：
- **发送邮箱**: kaiwen0151@163.com
- **接收邮箱**: kaiwen0151@163.com
- **SMTP服务器**: smtp.163.com:25

## 🛠️ 故障排除

### 常见问题：

1. **依赖安装失败**
   ```bash
   pip install Flask Flask-CORS
   ```

2. **端口被占用**
   ```bash
   # 修改server.py中的端口号
   app.run(host='0.0.0.0', port=5001, debug=True)
   ```

3. **邮件发送失败**
   - 检查163邮箱配置
   - 确认授权码正确
   - 检查网络连接

4. **数据库错误**
   ```bash
   # 删除数据库文件重新创建
   rm consultations.db
   python server.py
   ```

## 📞 技术支持

如有问题，请检查：
1. Python版本（建议3.7+）
2. 网络连接
3. 端口占用情况
4. 邮件配置

## 🔄 更新日志

### v1.0.0
- ✅ 基础后台管理系统
- ✅ 表单数据收集
- ✅ 邮件通知功能
- ✅ 数据统计显示
- ✅ 美观的UI界面 
 